<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://unpkg.com/wavesurfer.js"></script>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <style>
    /* Estilos generales */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #212121;
      color: #f0f0f0;
      display: flex;
      min-height: 100vh;
      flex-direction: column;
    }

    /* Barra lateral */
    .sidebar {
      width: 200px;
      height: 100vh;
      background: #171717;
      color: white;
      padding: 20px;
      position: fixed;
      overflow-y: auto;
    }

    .sidebar-header {
      text-align: center;
      margin-bottom: 15px;
    }

    .sidebar-logo {
      max-width: 100px;
      margin-bottom: 30px;
    }

    .sidebar-title {
      font-size: 1.2rem;
      margin-bottom: 5px;
      color: #f0f0f0;
    }

    .sidebar-subtitle {
      font-size: 0.8rem;
      color: #aaa;
      margin-bottom: 15px;
    }

    .sidebar-divider {
      border-bottom: 1px solid rgba(255,255,255,0.2);
      margin-bottom: 15px;
    }

    /* Botones de navegación */
    .nav-btn {
      display: block;
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      background: #282828;
      color: #f0f0f0;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-align: left;
      font-size: 15px;
      transition: all 0.3s;
    }

    .nav-btn:hover {
      background: #2a2a2a;
    }

    .nav-btn.active {
      background: #212121;
      font-weight: bold;
    }

    /* Contenido principal */
    .main-content {
      margin-left: 240px;
      padding: 20px 20px 30px 20px;
      width: calc(100% - 240px);
      flex: 1;
    }

    /* Secciones de contenido */
    .content-section {
      display: none;
      padding: 2rem;
      margin: 1rem auto 3rem auto;
      max-width: 900px;
      background: #2a2a2a;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    .content-section.active {
      display: block;
    }

    h2 {
      border-bottom: 2px solid #444;
      padding-bottom: 0.5rem;
      color: #f0f0f0;
    }

    h3, h4 {
      color: #f0f0f0;
    }

    .audio-block {
      margin: 1rem 0;
    }

    audio {
      width: 100%;
    }

    ul {
      color: #f0f0f0;
    }

    footer {
      text-align: center;
      padding: 0.5rem;
      color: #aaa;
      font-size: 0.8rem;
      width: calc(100% - 240px);
      margin-left: 240px;
      position: fixed;
      bottom: 0;
      background: transparent;
    }

    /* Player container styles */
    .player-container {
      margin: 20px 0;
      padding: 15px;
      background: #333;
      border-radius: 5px;
    }
    
    /* Audio group styles */
    .audio-group {
      margin-bottom: 30px;
      border-bottom: 1px solid #444;
      padding-bottom: 20px;
    }
    
    .audio-group:last-child {
      border-bottom: none;
    }
    
    /* Audio info styles */
    .audio-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    
    .audio-title {
      font-weight: bold;
    }
    
    .audio-duration {
      color: #aaa;
    }
  </style>
</head>
<body>
  <!-- Barra lateral -->
  <div class="sidebar">
    <div class="sidebar-header">
      <img src="img/logo-au.png" alt="Logo" class="sidebar-logo">
      <div class="sidebar-title">T02</div>
      <div class="sidebar-subtitle">ACUS099</div>
    </div>
    <div class="sidebar-divider"></div>
    <button class="nav-btn active" onclick="showSection('inicio')">Inicio</button>
    <button class="nav-btn" onclick="showSection('equipo')">Equipo</button>
    <button class="nav-btn" onclick="showSection('equipamiento')">Equipamiento</button>
    <button class="nav-btn" onclick="showSection('recintos')">Recintos</button>
    <button class="nav-btn" onclick="showSection('grabaciones')">Grabaciones Secas</button>
    <button class="nav-btn" onclick="showSection('impulsos')">Respuestas al Impulso</button>
    <button class="nav-btn" onclick="showSection('convolucion')">Audios Convolucionados</button>
  </div>

  <!-- Contenido principal -->
  <div class="main-content">
    <!-- Sección Inicio -->
    <section id="inicio" class="content-section active">
      <header>
        <h1>T02 | RESPUESTA AL IMPULSO Y CONVOLUCIÓN</h1>
        <p>ACUS099: Procesamiento Digital de Señales</p>
      </header>
      <p>El presente trabajo tiene como objetivo documentar el proceso de captura y procesamiento de respuestas al impulso (IR) en distintos recintos de la Universidad Austral de Chile (UACh), con el fin de aplicar las respuestas al impulso obtenidas a los audios grabados en la sala anecoica mediante la técnica de convolución, para simular cómo sonarían dichas señales en cada uno de los recintos medidos. De esta manera, es posible evidenciar el efecto del entorno acústico sobre una señal seca. Esta actividad se enmarca dentro del estudio de la acústica de recintos y se basa en la normativa ISO 3382, la cual define los procedimientos estándar para la medición de la respuesta al impulso en espacios arquitectónicos.</p>
      <p>El proyecto fue desarrollado por un grupo de estudiantes de la carrera de Ingeniería Civil Acústica, quienes realizaron registros de respuesta al impulso en tres recintos distintos del campus. Además, se efectuaron registros de voz e instrumento musical en la cámara anecoica del mismo laboratorio, con el propósito de disponer de señales libres de reflexiones para su posterior procesamiento..</p>
      <p>En esta página se presenta una descripción detallada del grupo de trabajo, el equipamiento utilizado, los procedimientos de medición seguidos, y se incluyen fotografías in-situ y archivos de audio. También se muestran las formas de onda correspondientes a cada etapa del proceso, con el fin de ilustrar de forma clara y didáctica el resultado del procesamiento acústico aplicado.</p>
      </section>
    

    <!-- Sección Equipo -->
    <section id="equipo" class="content-section">
      <h2>EQUIPO</h2>
      <h3>Estudiantes</h3>
  <ul>
    <li>Giorgio Belmar Velásquez - giorgio.belmar@alumnos.uach.cl</li>
    <li>Martín de la Cuadra Dauelsberg - martin.delacuadra@alumnos.uach.cl</li>
  </ul>

  <h3>Colaboradores</h3>

  <h4>Docentes</h4>
  <ul>
    <li>Dr. Victor Poblete - vpoblete@uach.cl</li>
    <li>Mg. Felipe Figueroa G. - felipe.figueroa01@uach.cl</li>
  </ul>

  <h4>Ayudantes</h4>
  <ul>
    <li>Valentina Valderas S. - valentina.valderas@alumnos.uach.cl</li>
    <li>Esteban Vargas C. - esteban.vargas01@alumnos.uach.cl</li>
  </ul>
</section>

    <!-- Sección Equipamiento -->
    <section id="equipamiento" class="content-section">
      <h2>EQUIPAMIENTO</h2>
      <p style="text-align: justify;">
      El sistema de equipamiento utilizado en este proyecto forma parte de una cadena electroacústica básica para la captura y procesamiento de sonido. Esta cadena comienza con el <strong>micrófono Behringer ECM8000</strong>, un micrófono de condensador ideal para mediciones acústicas, que convierte las variaciones de presión sonora en señales eléctricas. La <strong>fuente sonora</strong>, en este caso un <em>wood clapper</em>, proporciona impulsos acústicos breves y precisos necesarios para pruebas o calibraciones. La señal generada es dirigida a través de la <strong>interfaz de audio KOMPLETE Audio 1</strong>, que digitaliza la señal analógica para su posterior procesamiento. Finalmente, el software <strong>Ableton Live 12 Suite</strong> permite registrar, visualizar y analizar la información capturada, cerrando así el flujo de la cadena electroacústica mediante herramientas digitales de edición y análisis.</p>

      <div style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: space-around;">

        <div style="flex: 1 1 200px; text-align: center;">
          <img src="img/Behringer-ECM8000-Microfono-de-Condensador-para-Medicion-Set-Planet-Music-1200x1200-1.png" alt="Micrófono" style="width: 100%; max-width: 200px; border-radius: 8px;">
          <p>Micrófono: Behringer-ECM8000</p>
        </div>

        <div style="flex: 1 1 200px; text-align: center;">
          <img src="img/s-l400.png" alt="Fuente sonora" style="width: 100%; max-width: 200px; border-radius: 8px;">
          <p>Fuente sonora: Wood clapper</p>
        </div>

        <div style="flex: 1 1 200px; text-align: center;">
          <img src="img/23544.png" alt="Grabadora o interfaz" style="width: 100%; max-width: 200px; border-radius: 8px;">
          <p>Grabadora/Interface: KOMPLETE Audio 1</p>
        </div>

        <div style="flex: 1 1 200px; text-align: center;">
          <img src="img/s23_hero_sp23-dlab-ableton.png" alt="Software" style="width: 100%; max-width: 200px; border-radius: 8px;">
          <p>Software: Ableton Live 12 Suite</p>
        </div>

      </div>
    </section>

    <!-- Sección Recintos -->
    <section id="recintos" class="content-section">
      <h2>RECINTOS</h2>
      <h3>Recinto 01: Cámara Reverberante Acústica UACh</h3>
      <p>("scroll sobre la imagen")</p>
      
      <div class="player-container">
        <div class="audio-player-box">
          <video
            class="scroll-controlled-video"
            src="video/recinto1.mp4"
            width="100%"
            muted
            style="border-radius: 8px; background-color: black;"
          ></video>
        </div>
      </div>
      <script src="js/scrollVideo.js"></script>
      
      <h3>Recinto 02: Pasillo de Salas Edificio 6K</h3>
      <p>("scroll sobre la imagen")</p>

      <div class="player-container">
        <div class="audio-player-box">
          <video
            class="scroll-controlled-video"
            src="video/recinto2.mp4"
            width="100%"
            muted
            style="border-radius: 8px; background-color: black;"
          ></video>
        </div>
      </div>
      <script src="js/scrollVideo.js"></script>
      
      <h3>Recinto 03: Hall principal Edificio 14K</h3>
      <p>("scroll sobre la imagen")</p>
      <div class="player-container">
        <div class="audio-player-box">
          <video
            class="scroll-controlled-video"
            src="video/recinto3.mp4"
            width="100%"
            muted
            style="border-radius: 8px; background-color: black;"
          ></video>
        </div>
      </div>
      <script src="js/scrollVideo.js"></script>
      
    </section>

    <!-- Sección Grabaciones Secas -->
    <section id="grabaciones" class="content-section">
      <h2>GRABACIONES SECAS</h2>
      <p>Se realizan 2 grabaciones en la cámara anecoica del instituto Acústica UACh. Una de voz y otra de un instrumento musical.</p>
      
      <h4>Descripciones</h4>
      
      <ul class="audio-list">
        <li>muestra de voz: extracto de poema "El Hombre Imaginario" (Nicanor Parra)</li>
        <li>muestra de instrumento: botella metálica percutida a modo de instrumento idiófono</li>
      </ul>
      
      <h4> </h4>
      <div class="audio-group">
        <div id="voz-seca" class="player-container"></div>
      </div>
      
      <div class="audio-group">
        <div id="instrumento-seco" class="player-container"></div>
      </div>
    </section>

    <!-- Sección Respuestas al Impulso -->
    <section id="impulsos" class="content-section">
      <h2>RESPUESTAS AL IMPULSO</h2>
      <p>Respuestas al impulso medidas en los diferentes recintos.</p>
      <p>Como se representa en el apartado de "Recintos", se tomaron 3 punto de medición y 2 puntos de fuente en cada recinto.</p>
      <p>Lo cual son 6 combinaciones por recinto, 6 muestras impulso por recinto.</p>
      <p>A continuación se presentan nombradas con el siguiente orden lógico</p>
      <ul>
        <li>"F(n° punto de fuente)_P(n° punto de medición)"</li>
      </ul>
      
      <div class="audio-group">
        <h3>Muestras Recinto 01: Cámara Reverberante Acústica UACh</h3>
        <div id="salarev_F1_P1" class="player-container"></div>
        <div id="salarev_F1_P2" class="player-container"></div>
        <div id="salarev_F1_P3" class="player-container"></div>
        <div id="salarev_F2_P1" class="player-container"></div>
        <div id="salarev_F2_P2" class="player-container"></div>
        <div id="salarev_F2_P3" class="player-container"></div>       
      </div>
      
      <div class="audio-group">
        <h3>Muestras Recinto 02: Pasillo de Salas Edificio 6K</h3>
        <div id="ed6K_F1_P1" class="player-container"></div>
        <div id="ed6K_F1_P2" class="player-container"></div>
        <div id="ed6K_F1_P3" class="player-container"></div>
        <div id="ed6K_F2_P1" class="player-container"></div>
        <div id="ed6K_F2_P2" class="player-container"></div>
        <div id="ed6K_F2_P3" class="player-container"></div>       
      </div>
      
      <div class="audio-group">
        <h3>Muestra Recinto 03: Hall principal Edificio 14K</h3>
        <div id="ed14K_F1_P1" class="player-container"></div>
        <div id="ed14K_F1_P2" class="player-container"></div>
        <div id="ed14K_F1_P3" class="player-container"></div>
        <div id="ed14K_F2_P1" class="player-container"></div>
        <div id="ed14K_F2_P2" class="player-container"></div>
        <div id="ed14K_F2_P3" class="player-container"></div>       
      </div>
    </section>

    <!-- Sección Audios Convolucionados -->
    <section id="convolucion" class="content-section">
      <h2>AUDIOS CONVOLUCIONADOS</h2>
      <p>Resultados de aplicar convolución con las respuestas al impulso a las grabaciones secas.</p>
      
      <div class="audio-group">
        <h3>Voz en Cámara Reverberante</h3>
        <div id="voz-camara" class="player-container"></div>
      </div>
      
      <div class="audio-group">
        <h3>Voz en Edificio 14K</h3>
        <div id="voz-14k" class="player-container"></div>
      </div>
      
      <div class="audio-group">
        <h3>Voz en Edificio 6K Pasillos</h3>
        <div id="voz-6k" class="player-container"></div>
      </div>
      
      <div class="audio-group">
        <h3>Instrumento en Cámara Reverberante</h3>
        <div id="instrumento-camara" class="player-container"></div>
      </div>
      
      <div class="audio-group">
        <h3>Instrumento en Edificio 14K</h3>
        <div id="instrumento-14k" class="player-container"></div>
      </div>
      
      <div class="audio-group">
        <h3>Instrumento en Edificio 6K Pasillos</h3>
        <div id="instrumento-6k" class="player-container"></div>
      </div>
    </section>
  </div>

  <footer>
    <p>UACh - Escuela de Acústica | Proyecto de Medición ISO 3382</p>
  </footer>

  <script>
    function showSection(sectionId) {
      // Oculta todas las secciones
      document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
      });
      
      // Muestra la sección seleccionada
      document.getElementById(sectionId).classList.add('active');
      
      // Actualiza el botón activo
      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
    }
    
    function createAudioPlayer(containerId, audioSrc, title) {
      const container = document.getElementById(containerId);
      if (!container) return;
      
      // Limpiar el contenedor si ya tiene contenido
      container.innerHTML = '';
      
      // Crear elemento de información del audio
      const audioInfo = document.createElement('div');
      audioInfo.className = 'audio-info';
      
      const audioTitle = document.createElement('div');
      audioTitle.className = 'audio-title';
      audioTitle.textContent = title || 'Audio';
      
      const audioDuration = document.createElement('div');
      audioDuration.className = 'audio-duration';
      audioDuration.textContent = '0:00 / 0:00';
      
      audioInfo.appendChild(audioTitle);
      audioInfo.appendChild(audioDuration);
      container.appendChild(audioInfo);
      
      // Crear el visualizador de onda
      const wavesurfer = WaveSurfer.create({
        container: `#${containerId}`,
        waveColor: '#4a4a4a',
        progressColor: '#2b91af',
        cursorColor: '#ffffff',
        barWidth: 2,
        barRadius: 3,
        cursorWidth: 1,
        height: 100,
        barGap: 2,
        responsive: true
      });
      
      wavesurfer.load(audioSrc);
      
      // Add controls
      const controls = document.createElement('div');
      controls.style.marginTop = '10px';
      controls.style.display = 'flex';
      controls.style.gap = '10px';
      controls.style.alignItems = 'center';
      
      const playBtn = document.createElement('button');
      playBtn.textContent = 'Play/Pause';
      playBtn.onclick = () => wavesurfer.playPause();
      
      const stopBtn = document.createElement('button');
      stopBtn.textContent = 'Stop';
      stopBtn.onclick = () => {
        wavesurfer.stop();
        wavesurfer.seekTo(0);
      };
      
      const volumeControl = document.createElement('input');
      volumeControl.type = 'range';
      volumeControl.min = '0';
      volumeControl.max = '1';
      volumeControl.step = '0.01';
      volumeControl.value = '1';
      volumeControl.oninput = (e) => wavesurfer.setVolume(e.target.value);
      
      controls.appendChild(playBtn);
      controls.appendChild(stopBtn);
      controls.appendChild(document.createTextNode('Vol:'));
      controls.appendChild(volumeControl);
      
      container.appendChild(controls);
      
      // Update time display
      wavesurfer.on('audioprocess', () => {
        const currentTime = wavesurfer.getCurrentTime();
        const duration = wavesurfer.getDuration();
        audioDuration.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
      });
      
      // Format time as MM:SS
      function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
      }
    }
    
    // Initialize audio players when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      // Grabaciones secas
      createAudioPlayer("voz-seca", "audiosg/an_03_poem.wav", "muestra de voz");
      createAudioPlayer("instrumento-seco", "audiosg/an_01_bot.wav", "muestra de instrumento");
      
      // Respuestas al impulso

      createAudioPlayer("salarev_F1_P1", "audiosg/salarev_F1_P1.wav", "F1_P1");
      createAudioPlayer("salarev_F1_P2", "audiosg/salarev_F1_P2.wav", "F1_P2");
      createAudioPlayer("salarev_F1_P3", "audiosg/salarev_F1_P3.wav", "F1_P3");
      createAudioPlayer("salarev_F2_P1", "audiosg/salarev_F2_P1.wav", "F2_P1");
      createAudioPlayer("salarev_F2_P2", "audiosg/salarev_F2_P2.wav", "F2_P2");
      createAudioPlayer("salarev_F2_P3", "audiosg/salarev_F2_P3.wav", "F2_P3");

      createAudioPlayer("ed6K_F1_P1", "audiosg/ed6K_F1_P1.wav", "F1_P1");
      createAudioPlayer("ed6K_F1_P2", "audiosg/ed6K_F1_P2.wav", "F1_P2");
      createAudioPlayer("ed6K_F1_P3", "audiosg/ed6K_F1_P3.wav", "F1_P3");
      createAudioPlayer("ed6K_F2_P1", "audiosg/ed6K_F2_P1.wav", "F2_P1");
      createAudioPlayer("ed6K_F2_P2", "audiosg/ed6K_F2_P2.wav", "F2_P2");
      createAudioPlayer("ed6K_F2_P3", "audiosg/ed6K_F2_P3.wav", "F2_P3");

      createAudioPlayer("ed14K_F1_P1", "audiosg/ed14K_F1_P1.wav", "F1_P1");
      createAudioPlayer("ed14K_F1_P2", "audiosg/ed14K_F1_P2.wav", "F1_P2");
      createAudioPlayer("ed14K_F1_P3", "audiosg/ed14K_F1_P3.wav", "F1_P3");
      createAudioPlayer("ed14K_F2_P1", "audiosg/ed14K_F2_P1.wav", "F2_P1");
      createAudioPlayer("ed14K_F2_P2", "audiosg/ed14K_F2_P2.wav", "F2_P2");
      createAudioPlayer("ed14K_F2_P3", "audiosg/ed14K_F2_P3.wav", "F2_P3");

      
      // Audios convolucionados
      createAudioPlayer("voz-camara", "audiosg/resultado_convolucionreverb_03_poem.wav", "Voz convolucionada - Cámara Reverberante");
      createAudioPlayer("voz-14k", "audiosg/resultado_convolucioned14K_F2_P2an_03_poem.wav", "Voz convolucionada - Edificio 14K");
      createAudioPlayer("voz-6k", "audiosg/resultado_convolucion6kan_03_poem.wav", "Voz convolucionada - Edificio 6K Pasillos");
      createAudioPlayer("instrumento-camara", "audiosg/resultado_convolucionreverban_01_bot.wav", "Instrumento convolucionado - Cámara Reverberante");
      createAudioPlayer("instrumento-14k", "audiosg/resultado_convolucioned14K_F2_P2an_01_bot_bot.wav", "Instrumento convolucionado - Edificio 14K");
      createAudioPlayer("instrumento-6k", "audiosg/resultado_convolucion6kan_01.wav", "Instrumento convolucionado - Edificio 6K Pasillos");
    });
  </script>
</body>
</html>
